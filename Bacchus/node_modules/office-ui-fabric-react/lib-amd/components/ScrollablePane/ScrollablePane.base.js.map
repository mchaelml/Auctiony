{"version":3,"file":"ScrollablePane.base.js","sourceRoot":"../src/","sources":["components/ScrollablePane/ScrollablePane.base.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport * as PropTypes from 'prop-types';\r\nimport {\r\n  BaseComponent,\r\n  classNamesFunction,\r\n  customizable,\r\n  divProperties,\r\n  getNativeProps,\r\n  createRef\r\n} from '../../Utilities';\r\nimport {\r\n  IScrollablePane,\r\n  IScrollablePaneProps,\r\n  IScrollablePaneStyles,\r\n  IScrollablePaneStyleProps\r\n} from './ScrollablePane.types';\r\nimport { Sticky } from '../../Sticky';\r\n\r\nexport interface IScrollablePaneContext {\r\n  scrollablePane: PropTypes.Requireable<object>;\r\n}\r\n\r\nconst getClassNames = classNamesFunction<IScrollablePaneStyleProps, IScrollablePaneStyles>();\r\n\r\n@customizable('ScrollablePane', ['theme'])\r\nexport class ScrollablePaneBase extends BaseComponent<IScrollablePaneProps, {}> implements IScrollablePane {\r\n  public static childContextTypes: React.ValidationMap<IScrollablePaneContext> = {\r\n    scrollablePane: PropTypes.object\r\n  };\r\n\r\n  private _root = createRef<HTMLDivElement>();\r\n  private _stickyAboveRef = createRef<HTMLDivElement>();\r\n  private _stickyBelowRef = createRef<HTMLDivElement>();\r\n  private _subscribers: Set<Function>;\r\n  private _stickyAbove: Set<Sticky>;\r\n  private _stickyBelow: Set<Sticky>;\r\n\r\n  constructor(props: IScrollablePaneProps) {\r\n    super(props);\r\n    this._subscribers = new Set<Function>();\r\n    this._stickyAbove = new Set<Sticky>();\r\n    this._stickyBelow = new Set<Sticky>();\r\n  }\r\n\r\n  public get root(): HTMLDivElement | null {\r\n    return this._root.current;\r\n  }\r\n\r\n  public get stickyAbove(): HTMLDivElement | null {\r\n    return this._stickyAboveRef.current;\r\n  }\r\n\r\n  public get stickyBelow(): HTMLDivElement | null {\r\n    return this._stickyBelowRef.current;\r\n  }\r\n\r\n  public getChildContext() {\r\n    return {\r\n      scrollablePane: {\r\n        subscribe: this.subscribe,\r\n        unsubscribe: this.unsubscribe,\r\n        addStickyHeader: this.addStickyHeader,\r\n        removeStickyHeader: this.removeStickyHeader,\r\n        addStickyFooter: this.addStickyFooter,\r\n        removeStickyFooter: this.removeStickyFooter,\r\n        notifySubscribers: this.notifySubscribers\r\n      }\r\n    };\r\n  }\r\n\r\n  public componentDidMount(): void {\r\n    this._events.on(this._root.current, 'scroll', this.notifySubscribers);\r\n    this._events.on(window, 'resize', this._onWindowResize);\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    this._events.off(this._root.current);\r\n    this._events.off(window);\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IScrollablePaneProps) {\r\n    const initialScrollPosition = this.props.initialScrollPosition;\r\n    if (this._root.current && initialScrollPosition && prevProps.initialScrollPosition !== initialScrollPosition) {\r\n      this._root.current.scrollTop = initialScrollPosition;\r\n    }\r\n  }\r\n\r\n  public render(): JSX.Element {\r\n    const { className, theme, getStyles } = this.props;\r\n    const classNames = getClassNames(getStyles!,\r\n      {\r\n        theme: theme!,\r\n        className\r\n      }\r\n    );\r\n\r\n    return (\r\n      <div\r\n        { ...getNativeProps(this.props, divProperties) }\r\n        ref={ this._root }\r\n        className={ classNames.root }\r\n        data-is-scrollable={ true }\r\n      >\r\n        <div ref={ this._stickyAboveRef } className={ classNames.stickyAbove } />\r\n        <div ref={ this._stickyBelowRef } className={ classNames.stickyBelow } />\r\n        { this.props.children }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public forceLayoutUpdate() {\r\n    this._onWindowResize();\r\n  }\r\n\r\n  public subscribe = (handler: (headerBound: ClientRect, footerBound: ClientRect) => void): void => {\r\n    this._subscribers.add(handler);\r\n  }\r\n\r\n  public unsubscribe = (handler: (headerBound: ClientRect, footerBound: ClientRect) => void): void => {\r\n    this._subscribers.delete(handler);\r\n  }\r\n\r\n  public addStickyHeader = (sticky: Sticky): void => {\r\n    this._addSticky(sticky, this._stickyAbove, () => {\r\n      if (this._stickyAboveRef.current) {\r\n        this._stickyAboveRef.current.appendChild(sticky.content);\r\n      }\r\n    });\r\n  }\r\n\r\n  public addStickyFooter = (sticky: Sticky): void => {\r\n    this._addSticky(sticky, this._stickyBelow, () => {\r\n      if (this._stickyBelowRef.current) {\r\n        this._stickyBelowRef.current.insertBefore(sticky.content, this._stickyBelowRef.current.firstChild);\r\n      }\r\n    });\r\n  }\r\n\r\n  public removeStickyHeader = (sticky: Sticky): void => {\r\n    this._removeSticky(sticky, this._stickyAbove, this._stickyAboveRef.current);\r\n  }\r\n\r\n  public removeStickyFooter = (sticky: Sticky): void => {\r\n    this._removeSticky(sticky, this._stickyBelow, this._stickyBelowRef.current);\r\n  }\r\n\r\n  public notifySubscribers = (sort?: boolean): void => {\r\n    this._subscribers.forEach((handle) => {\r\n      if (this._stickyAboveRef.current && this._stickyBelowRef.current) {\r\n        handle(this._stickyAboveRef.current.getBoundingClientRect(), this._stickyBelowRef.current.getBoundingClientRect());\r\n      }\r\n    });\r\n    if (this._stickyAbove.size > 1) {\r\n      this._sortStickies(this._stickyAbove, this._stickyAboveRef.current);\r\n    }\r\n    if (this._stickyBelow.size > 1) {\r\n      this._sortStickies(this._stickyBelow, this._stickyBelowRef.current);\r\n    }\r\n  }\r\n\r\n  public getScrollPosition = (): number => {\r\n    if (this._root.current) {\r\n      return this._root.current.scrollTop;\r\n    }\r\n\r\n    return 0;\r\n  }\r\n\r\n  private _addSticky(sticky: Sticky, stickyList: Set<Sticky>, addStickyToContainer: () => void): void {\r\n    if (!stickyList.has(sticky)) {\r\n      stickyList.add(sticky);\r\n      addStickyToContainer();\r\n      sticky.content.addEventListener('transitionend',\r\n        this._setPlaceholderHeights.bind(null, stickyList),\r\n        false);\r\n      if (sticky.props.stickyClassName) {\r\n        this._async.setTimeout(() => {\r\n          if (sticky.props.stickyClassName) {\r\n            sticky.content.children[0].classList.add(sticky.props.stickyClassName);\r\n          }\r\n        }, 1);\r\n      }\r\n      this._setPlaceholderHeights(stickyList);\r\n    }\r\n  }\r\n\r\n  private _removeSticky(sticky: Sticky, stickyList: Set<Sticky>, container: HTMLElement | null): void {\r\n    if (container && stickyList.has(sticky)) {\r\n      sticky.content.removeEventListener('transitionend',\r\n        this._setPlaceholderHeights.bind(null, stickyList, container));\r\n      stickyList.delete(sticky);\r\n    }\r\n  }\r\n\r\n  private _onWindowResize(): void {\r\n    this._async.setTimeout(() => {\r\n      this.notifySubscribers();\r\n      this._setPlaceholderHeights(this._stickyAbove);\r\n      this._setPlaceholderHeights(this._stickyBelow);\r\n    }, 5);\r\n  }\r\n\r\n  private _setPlaceholderHeights = (stickies: Set<Sticky>): void => {\r\n    stickies.forEach((sticky, idx) => {\r\n      sticky.setPlaceholderHeight(sticky.content.clientHeight);\r\n    });\r\n  }\r\n\r\n  private _sortStickies(stickyList: Set<Sticky>, container: HTMLElement | null): void {\r\n    // No sorting needed if there is no container\r\n    if (!container) {\r\n      return;\r\n    }\r\n\r\n    let stickyArr = Array.from(stickyList);\r\n    stickyArr = stickyArr.sort((a, b) => {\r\n      const aOffset = this._calculateOffsetParent(a.root.current);\r\n      const bOffset = this._calculateOffsetParent(b.root.current);\r\n      return aOffset - bOffset;\r\n    });\r\n    // Get number of elements that is already in order.\r\n    let elementsInOrder = 0;\r\n    while (elementsInOrder < container.children.length && elementsInOrder < stickyArr.length) {\r\n      if (container.children[elementsInOrder] === stickyArr[elementsInOrder].content) {\r\n        ++elementsInOrder;\r\n      } else {\r\n        break;\r\n      }\r\n    }\r\n    // Remove elements that is not in order if exist.\r\n    for (let i = container.children.length - 1; i >= elementsInOrder; --i) {\r\n      container.removeChild(container.children[i]);\r\n    }\r\n    // Append further elements if needed.\r\n    for (let i = elementsInOrder; i < stickyArr.length; ++i) {\r\n      container.appendChild(stickyArr[i].content);\r\n    }\r\n  }\r\n\r\n  private _calculateOffsetParent(ele: HTMLElement | null): number {\r\n    let offset = 0;\r\n    while (ele && this._root.current && ele.offsetParent !== this._root.current.offsetParent) {\r\n      offset += ele.offsetTop;\r\n      if (ele.parentElement) {\r\n        ele = ele.parentElement;\r\n      }\r\n    }\r\n    return offset;\r\n  }\r\n}\r\n"]}